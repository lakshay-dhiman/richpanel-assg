(function(){"use strict";var t={9818:function(t,e,a){var n=a(9242),r=a(3396);const s={id:"page"};function i(t,e,a,n,i,o){const l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(l)])}var o={name:"App"},l=a(89);const c=(0,l.Z)(o,[["render",i]]);var u=c,p=a(2483);const d=t=>((0,r.dD)("data-v-68b9dd41"),t=t(),(0,r.Cn)(),t),h={class:"wrapper-main"},m={class:"home-wrapper"},_=d((()=>(0,r._)("h1",null,"WELCOME TO #APP",-1))),g={class:"buttons"};function v(t,e,a,n,s,i){return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",m,[_,(0,r._)("div",g,[(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>i.gotologin&&i.gotologin(...t))},"LOGIN"),(0,r._)("button",{onClick:e[1]||(e[1]=(...t)=>i.gotoregister&&i.gotoregister(...t))},"REGISTER")])])])}var w={name:"HomePage",methods:{gotologin:function(){this.$router.push("/login")},gotoregister:function(){this.$router.push("/register")}},beforeCreate(){localStorage.getItem("token")&&this.$router.push("/account")}};const y=(0,l.Z)(w,[["render",v],["__scopeId","data-v-68b9dd41"]]);var f=y,b=a(7139);const C=t=>((0,r.dD)("data-v-c4172f02"),t=t(),(0,r.Cn)(),t),k={class:"wrapper-main"},P={class:"register-wrapper"},S=C((()=>(0,r._)("h3",{class:"heading"}," Create Account ",-1))),D=C((()=>(0,r._)("label",{for:"name"},"Name :",-1))),$=C((()=>(0,r._)("label",{for:"email"},"Email :",-1))),I=C((()=>(0,r._)("label",{for:"password"},"Password : ",-1))),O=C((()=>(0,r._)("input",{type:"submit",id:"submit",value:"Sign Up"},null,-1))),A={class:"tologin"},T=(0,r.Uk)("Already Have an account ? ");function j(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",k,[(0,r._)("div",P,[S,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.error,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"errors",key:t},(0,b.zw)(t),1)))),128)),(0,r._)("form",{onSubmit:e[3]||(e[3]=(...t)=>o.validate_form&&o.validate_form(...t))},[D,(0,r.wy)((0,r._)("input",{type:"text",name:"name",id:"name",placeholder:"Enter your name","onUpdate:modelValue":e[0]||(e[0]=t=>i.name=t)},null,512),[[n.nr,i.name]]),$,(0,r.wy)((0,r._)("input",{type:"text",id:"email",name:"email",placeholder:"Enter your email address","onUpdate:modelValue":e[1]||(e[1]=t=>i.email=t)},null,512),[[n.nr,i.email]]),I,(0,r.wy)((0,r._)("input",{type:"text",id:"password",name:"password",placeholder:"Enter a password","onUpdate:modelValue":e[2]||(e[2]=t=>i.password=t)},null,512),[[n.nr,i.password]]),O],32),(0,r._)("div",A,[T,(0,r._)("a",{onClick:e[4]||(e[4]=(...t)=>o.gotologin&&o.gotologin(...t))},"Login")])])])}var E={name:"RegisterPage",data(){return{email:null,password:null,name:null,error:[]}},beforeCreate(){localStorage.getItem("token")&&this.$router.push("/account")},methods:{validateEmail:function(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},gotologin:function(){this.$router.push("/login")},validate_form:function(t){var e=this;t.preventDefault(),this.error=[];var a=e.name,n=this.email,r=this.password,s=!1;""==a||null==this.name?(e.error.push("Name cannot be empty"),s=!0):""==n||null==this.email?(e.error.push("Email cannot be empty"),s=!0):""==r||null==this.password?(e.error.push("Password cannot be empty"),s=!0):this.validateEmail(n)?r.length<6&&(e.error.push("Password should be atleast 6 characters long"),s=!0):(e.error.push("Enter valid email"),s=!0),s||this.register_user(a,n,r)},register_user:async function(t,e,a){var n={name:t,email:e,password:a};try{const t=await fetch("http://localhost:3000/api/auth/register",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(n)}),e=await t.status;if(200==e)this.login_user(n.email,n.password);else{const e=await t.json();this.error.push(e.error)}}catch(r){console.log(r)}},login_user:async function(t,e){var a={email:t,password:e};try{const t=await fetch("http://localhost:3000/api/auth/login",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(a)}),e=await t.status;if(200==e){const e=await t.json(),a=e.token,n=e._id,r=e.name;this.$store.commit("setToken",a),this.$store.commit("setUserId",n),this.$store.commit("setUserName",r),localStorage.setItem("token",e.token),localStorage.setItem("user_id",e._id),localStorage.setItem("name",e.name),this.$router.push("/account")}else{const e=await t.json();this.error.push(e.error)}}catch(n){console.log(n)}}}};const z=(0,l.Z)(E,[["render",j],["__scopeId","data-v-c4172f02"]]);var N=z;const U=t=>((0,r.dD)("data-v-3ae9c41d"),t=t(),(0,r.Cn)(),t),M={class:"wrapper-main"},Z={class:"login-wrapper"},x=U((()=>(0,r._)("h3",{class:"heading"}," Login to your account ",-1))),J=U((()=>(0,r._)("label",{for:"email"},"Email :",-1))),Y=U((()=>(0,r._)("label",{for:"password"},"Password : ",-1))),L=U((()=>(0,r._)("input",{type:"submit",id:"submit",value:"Sign Up"},null,-1))),R={class:"tologin"},V=(0,r.Uk)("Don't have an account ? ");function q(t,e,a,s,i,o){return(0,r.wg)(),(0,r.iD)("div",M,[(0,r._)("div",Z,[x,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.error,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"errors",key:t},(0,b.zw)(t),1)))),128)),(0,r._)("form",{onSubmit:e[2]||(e[2]=(...t)=>o.validate_form&&o.validate_form(...t))},[J,(0,r.wy)((0,r._)("input",{type:"text",id:"email",name:"email",placeholder:"Enter your email address","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t)},null,512),[[n.nr,i.email]]),Y,(0,r.wy)((0,r._)("input",{type:"text",id:"password",name:"password",placeholder:"Enter the password","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t)},null,512),[[n.nr,i.password]]),L],32),(0,r._)("div",R,[V,(0,r._)("a",{onClick:e[3]||(e[3]=(...t)=>o.gotoregister&&o.gotoregister(...t))},"Register")])])])}var B={name:"LoginPage",data(){return{email:null,password:null,error:[]}},beforeCreate(){localStorage.getItem("token")&&this.$router.push("/account")},methods:{validateEmail:function(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},gotoregister:function(){this.$router.push("/register")},login_user:async function(t,e){var a={email:t,password:e};try{const t=await fetch("http://localhost:3000/api/auth/login",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(a)}),e=await t.status;if(200==e){const e=await t.json();this.$store.commit("setToken",e.token),this.$store.commit("setUserId",e._id),this.$store.commit("setUserName",e.name),localStorage.setItem("token",e.token),localStorage.setItem("user_id",e._id),localStorage.setItem("name",e.name),this.$router.push("/account")}else{const e=await t.json();this.error.push(e.error)}}catch(n){console.log(n)}},validate_form:function(t){var e=this;t.preventDefault(),this.error=[];var a=this.email,n=this.password,r=!1;""==a||null==this.email?(e.error.push("Email cannot be empty"),r=!0):""==n||null==this.password?(e.error.push("Password cannot be empty"),r=!0):this.validateEmail(a)||(e.error.push("Enter valid email"),r=!0),r||this.login_user(a,n)}}};const G=(0,l.Z)(B,[["render",q],["__scopeId","data-v-3ae9c41d"]]);var H=G;const F=t=>((0,r.dD)("data-v-c64eeb1c"),t=t(),(0,r.Cn)(),t),K={class:"plans-wrapper"},Q=F((()=>(0,r._)("h1",null," Choose the right plan for you ",-1))),W={class:"plan-picker"},X={class:"head"},tt={class:"row-one"},et={class:"data"},at={class:"row-two"},nt=F((()=>(0,r._)("td",{class:"property"},"Monthly price",-1))),rt={class:"row-three"},st=F((()=>(0,r._)("td",{class:"property"},"Video Quality",-1))),it={class:"row-three"},ot=F((()=>(0,r._)("td",{class:"property"},"Resolution",-1))),lt={class:"row-three"},ct=F((()=>(0,r._)("td",{class:"property"},"Devices you can use to watch",-1))),ut=F((()=>(0,r._)("ul",null,[(0,r._)("li",null,"Phone"),(0,r._)("li",null,"Tablet")],-1))),pt=[ut],dt=F((()=>(0,r._)("ul",null,[(0,r._)("li",null,"Phone"),(0,r._)("li",null,"Tablet"),(0,r._)("li",null,"Computer"),(0,r._)("li",null,"TV")],-1))),ht=[dt],mt=F((()=>(0,r._)("ul",null,[(0,r._)("li",null,"Phone"),(0,r._)("li",null,"Tablet"),(0,r._)("li",null,"Computer"),(0,r._)("li",null,"TV")],-1))),_t=[mt],gt=F((()=>(0,r._)("ul",null,[(0,r._)("li",null,"Phone"),(0,r._)("li",null,"Tablet"),(0,r._)("li",null,"Computer"),(0,r._)("li",null,"TV")],-1))),vt=[gt];function wt(t,e,a,n,s,i){return(0,r.wg)(),(0,r.iD)("div",K,[Q,(0,r._)("div",W,[(0,r._)("table",X,[(0,r._)("tr",tt,[(0,r._)("td",null,[(0,r._)("div",{class:"reccurence",onClick:e[0]||(e[0]=(...t)=>i.switchrecurrence&&i.switchrecurrence(...t))},[(0,r._)("div",{class:(0,b.C_)(["left",{active:1==s.rec}])},"Monthly",2),(0,r._)("div",{class:(0,b.C_)(["right",{active:0==s.rec}])},"Yearly",2)])]),(0,r._)("th",{class:(0,b.C_)({active:0==s.plan}),onClick:e[1]||(e[1]=t=>i.changePlan(0))}," Mobile ",2),(0,r._)("th",{class:(0,b.C_)({active:1==s.plan}),onClick:e[2]||(e[2]=t=>i.changePlan(1))}," Basic ",2),(0,r._)("th",{class:(0,b.C_)({active:2==s.plan}),onClick:e[3]||(e[3]=t=>i.changePlan(2))}," Standard ",2),(0,r._)("th",{class:(0,b.C_)({active:3==s.plan}),onClick:e[4]||(e[4]=t=>i.changePlan(3))}," Premium ",2)])]),(0,r._)("table",et,[(0,r._)("tr",at,[nt,(0,r._)("td",{class:(0,b.C_)(["attribute",{active:0==s.plan}]),onClick:e[5]||(e[5]=t=>i.changePlan(0))},"₹ "+(0,b.zw)(i.price1),3),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:1==s.plan}]),onClick:e[6]||(e[6]=t=>i.changePlan(1))},"₹ "+(0,b.zw)(i.price2),3),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:2==s.plan}]),onClick:e[7]||(e[7]=t=>i.changePlan(2))},"₹ "+(0,b.zw)(i.price3),3),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:3==s.plan}]),onClick:e[8]||(e[8]=t=>i.changePlan(2))},"₹ "+(0,b.zw)(i.price4),3)]),(0,r._)("tr",rt,[st,(0,r._)("td",{class:(0,b.C_)(["attribute",{active:0==s.plan}]),onClick:e[9]||(e[9]=t=>i.changePlan(0))},"Good",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:1==s.plan}]),onClick:e[10]||(e[10]=t=>i.changePlan(1))},"Good",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:2==s.plan}]),onClick:e[11]||(e[11]=t=>i.changePlan(2))},"Better",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:3==s.plan}]),onClick:e[12]||(e[12]=t=>i.changePlan(3))},"Best",2)]),(0,r._)("tr",it,[ot,(0,r._)("td",{class:(0,b.C_)(["attribute",{active:0==s.plan}]),onClick:e[13]||(e[13]=t=>i.changePlan(0))},"480p",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:1==s.plan}]),onClick:e[14]||(e[14]=t=>i.changePlan(1))},"480p",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:2==s.plan}]),onClick:e[15]||(e[15]=t=>i.changePlan(2))},"1080p",2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:3==s.plan}]),onClick:e[16]||(e[16]=t=>i.changePlan(3))},"4K+HDR",2)]),(0,r._)("tr",lt,[ct,(0,r._)("td",{class:(0,b.C_)(["attribute",{active:0==s.plan}]),onClick:e[17]||(e[17]=t=>i.changePlan(0))},pt,2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:1==s.plan}]),onClick:e[18]||(e[18]=t=>i.changePlan(1))},ht,2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:2==s.plan}]),onClick:e[19]||(e[19]=t=>i.changePlan(2))},_t,2),(0,r._)("td",{class:(0,b.C_)(["attribute",{active:3==s.plan}]),onClick:e[20]||(e[20]=t=>i.changePlan(3))},vt,2)])])]),(0,r._)("button",{onClick:e[21]||(e[21]=(...t)=>i.gotocheckout&&i.gotocheckout(...t))},"Next")])}var yt={name:"PlansDisplay",data(){return{rec:1,plan:0}},computed:{price1:function(){return 1==this.rec?"100":"1000"},price2:function(){return 1==this.rec?"200":"2000"},price3:function(){return 1==this.rec?"500":"5000"},price4:function(){return 1==this.rec?"700":"7000"}},methods:{switchrecurrence:function(){1==this.rec?this.rec=0:this.rec=1},changePlan:function(t){this.plan=t},gotocheckout:function(){const t=`/checkout/${this.plan}/${this.rec}`;this.$router.push(t)}},async beforeCreate(){localStorage.getItem("token")||this.$router.push("/");const t=await fetch("http://localhost:3000/api/subscriptions/show_subscription",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({user_id:localStorage.getItem("user_id")})}),e=await t.json();1==e.activity_status&&this.$router.push("/subscription")}};const ft=(0,l.Z)(yt,[["render",wt],["__scopeId","data-v-c64eeb1c"]]);var bt=ft,Ct=a.p+"img/loader.d309a02f.svg",kt=a.p+"img/check.722f5097.svg",Pt=a.p+"img/error.d511800f.svg";const St=t=>((0,r.dD)("data-v-3fd2529e"),t=t(),(0,r.Cn)(),t),Dt={class:"wrapper-main"},$t={class:"wrapper-payment"},It={class:"payment"},Ot=St((()=>(0,r._)("h2",null,"Complete Payment",-1))),At=St((()=>(0,r._)("p",null,"Enter your credit or debit card details below",-1))),Tt=St((()=>(0,r._)("div",{id:"card-element"},null,-1))),jt=St((()=>(0,r._)("button",{id:"submit"},"Confirm Payment",-1))),Et={key:0,src:Ct,alt:"loading"},zt={key:1,src:kt,alt:"success"},Nt={key:2,src:Pt,alt:"error"},Ut={class:"information"},Mt=St((()=>(0,r._)("h2",null,"Order Summary",-1))),Zt={class:"details"},xt={class:"info"},Jt=St((()=>(0,r._)("div",null,"Plan Name :",-1))),Yt={class:"info"},Lt=St((()=>(0,r._)("div",null,"Billing Cycle :",-1))),Rt={class:"info"},Vt=St((()=>(0,r._)("div",null,"Plan Price :",-1)));function qt(t,e,a,n,s,i){return(0,r.wg)(),(0,r.iD)("div",Dt,[(0,r._)("div",$t,[(0,r._)("div",It,[Ot,At,(0,r._)("form",{id:"payment-form",onSubmit:e[0]||(e[0]=(...e)=>t.stripeSubmit&&t.stripeSubmit(...e))},[Tt,jt,1==s.status?((0,r.wg)(),(0,r.iD)("img",Et)):(0,r.kq)("",!0),0==s.status?((0,r.wg)(),(0,r.iD)("img",zt)):(0,r.kq)("",!0),2==s.status?((0,r.wg)(),(0,r.iD)("img",Nt)):(0,r.kq)("",!0)],32),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.error,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"errors",key:t},(0,b.zw)(t),1)))),128))]),(0,r._)("div",Ut,[Mt,(0,r._)("div",Zt,[(0,r._)("div",xt,[Jt,(0,r._)("div",null,(0,b.zw)(s.plan_name),1)]),(0,r._)("div",Yt,[Lt,(0,r._)("div",null,(0,b.zw)(s.billing_cycle),1)]),(0,r._)("div",Rt,[Vt,(0,r._)("div",null,"₹ "+(0,b.zw)(s.price),1)])])])])])}var Bt=a(5472),Gt={data(){return{error:[],plan_name:null,billing_cycle:null,price:null,token:null,price_num:null,plan_value:null,rec_value:null,status:null}},async mounted(){var t=this,e=this.$route.params.plan,a=this.$route.params.rec;switch(e=parseInt(e),this.plan_value=parseInt(e),this.rec_value=parseInt(a),e){case 0:this.plan_name="Mobile",this.price=1==a?"100/mo":"1000/yr",this.price_num=1==a?100:1e3;break;case 1:this.plan_name="Basic",this.price=1==a?"200/mo":"2000/yr",this.price_num=1==a?200:2e3;break;case 2:this.plan_name="Standard",this.price=1==a?"500/mo":"5000/yr",this.price_num=1==a?500:5e3;break;case 3:this.plan_name="Premium",this.price=1==a?"700/mo":"7000/yr",this.price_num=1==a?700:7e3;break}this.billing_cycle=1==a?"Monthly":"Yearly";const n=await(0,Bt.J)("pk_test_51LSSNGSAgc7vhbhQdNnkakFyRUNVYPP0oCMaMRnDPnACefzQrtCQ9owTa4yEbOmef3zXKmp2gnROfHG6lugW2SCB00YnpFmisu");var r=n.elements(),s={base:{color:"#32325d"}},i=r.create("card",{style:s});i.mount("#card-element");var o=document.getElementById("payment-form");o.addEventListener("submit",(async function(e){e.preventDefault(),t.error=[];try{var a=await n.createSource(i);if(t.status=1,a.source){const e=await n.createSource({type:"three_d_secure",currency:"inr",amount:100*t.price_num,three_d_secure:{card:a.source.id},redirect:{return_url:"http://localhost:8080/redirect"}});var r=e.source.redirect.url,s=window.open(r,"redirect","width=500px,height=500px,left=100,top=100"),o=setInterval((async function(){if(s.closed){clearInterval(o);var a={plan:{type:t.plan_value,rec:t.rec_value},user:{user_id:localStorage.getItem("user_id"),user_name:localStorage.getItem("name")},source:e.source.id},n=await fetch("http://localhost:3000/api/payments/subscribe",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(a)});if(200==n.status)t.status=0,window.setTimeout((()=>{t.$router.push("/subscription")}),1e3);else{var r=await n.json();console.log(r.error),t.status=2,t.error.push(r.error)}}}),250)}else a.error&&(t.status=3,t.error.push(a.error.message))}catch(l){console.log(l)}}))},async beforeCreate(){localStorage.getItem("token")||this.$router.push("/");const t=await fetch("http://localhost:3000/api/subscriptions/show_subscription",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({user_id:localStorage.getItem("user_id")})}),e=await t.json();1==e.activity_status&&this.$router.push("/");var a=this.$route.params.plan,n=this.$route.params.rec;(0!=a&&1!=a&&2!=a&&3!=a||0!=n&&1!=n)&&this.$router.push("/")}};const Ht=(0,l.Z)(Gt,[["render",qt],["__scopeId","data-v-3fd2529e"]]);var Ft=Ht;function Kt(t,e,a,n,r,s){return" processing payment "}var Qt={async mounted(){window.onunload=function(){opener.closedWindow()},window.close()}};const Wt=(0,l.Z)(Qt,[["render",Kt]]);var Xt=Wt;const te=t=>((0,r.dD)("data-v-087fc118"),t=t(),(0,r.Cn)(),t),ee={class:"wrapper-main"},ae={key:0,class:"plan_details"},ne={class:"plan_activity"},re={class:"active"},se=te((()=>(0,r._)("h2",null,"Current Plan Details",-1))),ie={class:"plan-name-price"},oe={class:"name"},le={class:"devices"},ce={class:"price"},ue={class:"note"},pe={key:0},de={key:1},he={key:1,class:"nosubs"},me=te((()=>(0,r._)("h1",null,"No sibscriptions yet",-1)));function _e(t,e,a,n,s,i){return(0,r.wg)(),(0,r.iD)("div",ee,[0==s.nosub?((0,r.wg)(),(0,r.iD)("div",ae,[(0,r._)("div",ne,[(0,r._)("div",re,[se,(0,r._)("div",{class:(0,b.C_)(s.activity_status)},(0,b.zw)(s.activity_status),3)]),"active"==s.activity_status?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"cancel",onClick:e[0]||(e[0]=(...t)=>i.cancelsub&&i.cancelsub(...t))},"Cancel")):(0,r.kq)("",!0)]),(0,r._)("div",ie,[(0,r._)("div",oe,(0,b.zw)(s.plan_name),1),(0,r._)("div",le,(0,b.zw)(s.devices),1),(0,r._)("div",ce,"₹ "+(0,b.zw)(s.price),1)]),"canceled"==s.activity_status?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:e[1]||(e[1]=(...t)=>i.gotoaccount&&i.gotoaccount(...t))},"Get Subscription")):(0,r.kq)("",!0),(0,r._)("div",ue,["active"==s.activity_status?((0,r.wg)(),(0,r.iD)("p",pe,"Your subscription has started on "+(0,b.zw)(s.start)+" and will auto renew on "+(0,b.zw)(s.end),1)):(0,r.kq)("",!0),"canceled"==s.activity_status?((0,r.wg)(),(0,r.iD)("p",de,"Your subscription was cancelled and you will loose access to services on "+(0,b.zw)(s.end),1)):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),1==s.nosub?((0,r.wg)(),(0,r.iD)("div",he,[me,(0,r._)("button",{onClick:e[2]||(e[2]=(...t)=>i.gotoaccount&&i.gotoaccount(...t))},"Get a subscription")])):(0,r.kq)("",!0)])}var ge={data(){return{plan_name:null,devices:null,price:null,start:null,end:null,activity_status:null,subscription_id:null,nosub:!1}},async mounted(){const t=await fetch("http://localhost:3000/api/subscriptions/show_subscription",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({user_id:localStorage.getItem("user_id")})}),e=await t.json();if(e){var a=e.plan,n=e.renual;switch(a){case 0:this.plan_name="Mobile",this.devices="Phone + Tablet",this.price=1==n?"100/mo":"1000/yr";break;case 1:this.plan_name="Basic",this.devices="Phone + Tablet",this.price=1==n?"200/mo":"2000/yr";break;case 2:this.plan_name="Standard",this.devices="Phone + Tablet",this.price=1==n?"500/mo":"5000/yr";break;case 3:this.plan_name="Premium",this.devices="Phone + Tablet",this.price=1==n?"700/mo":"7000/yr";break}this.activity_status=1==e.activity_status?"active":"canceled";var r=new Date(e.activated_on),s=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],i=`${r.getDate()} ${s[r.getMonth()]}, ${r.getFullYear()}`;r=new Date(e.reniews_on);var o=`${r.getDate()} ${s[r.getMonth()]}, ${r.getFullYear()}`;this.start=i,this.end=o,this.subscription_id=e.subscription_id}else this.nosub=!0},methods:{cancelsub:async function(){try{const e=await fetch("http://localhost:3000/api/subscriptions/cancel_subscription",{method:"post",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({sub_id:this.subscription_id})});var t=await e.json();this.activity_status=1==t.activity_status?"active":"canceled"}catch(e){console.log(e)}},gotoaccount:function(){this.$router.push("/account")}},beforeCreate(){localStorage.getItem("token")||this.$router.push("/")}};const ve=(0,l.Z)(ge,[["render",_e],["__scopeId","data-v-087fc118"]]);var we=ve;const ye=[{path:"/",name:"Home",component:f},{path:"/register",name:"Register",component:N},{path:"/login",name:"login",component:H},{path:"/account",name:"account",component:bt},{path:"/checkout/:plan/:rec",name:"checkout",component:Ft},{path:"/redirect",name:"redirect",component:Xt},{path:"/subscription",name:"subscription",component:we}],fe=(0,p.p7)({history:(0,p.PO)("/"),routes:ye});var be=fe,Ce=a(65),ke=new Ce.ZP.Store({state(){return{user_id:null,user_name:null,token:null}},mutations:{setUserId(t,e){t.user_id=e},setUserName(t,e){t.user_name=e},setToken(t,e){t.token=e}},getters:{isLoggedIn(t){return!!t.token}}});(0,n.ri)(u).use(be).use(ke).mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,r,s){if(!n){var i=1/0;for(u=0;u<t.length;u++){n=t[u][0],r=t[u][1],s=t[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,s<i&&(i=s));if(o){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,r,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,s,i=n[0],o=n[1],l=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var u=l(a)}for(e&&e(n);c<i.length;c++)s=i[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(u)},n=self["webpackChunkapp"]=self["webpackChunkapp"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9818)}));n=a.O(n)})();
//# sourceMappingURL=app.4a64ae68.js.map